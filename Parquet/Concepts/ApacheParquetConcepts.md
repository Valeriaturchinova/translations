# Концепции

## Терминология.

*Block (hdfs block)* (блок): Означает блок в hdfs, и в этом смысле он будет использоваться при определении формата файла Apache Parquet, который создан для работы поверх hdfs.

*File* (файл): файл в hdfs, который обязательно должен включать метаданные файла, но сами данные могут отсуствовать.

*Row group* (группа строк): логическое горизонтальное разбиение данных на строки для распараллеливания работы на уровне MapReduce. Для группы строк не существует физической структуры. Группа строк состоит из блоков значений каждого столбца (Column chunk).

*Column chunk* (блок значений столбца): Блок значений одного столбца. Они находятся в определенной группе строк (Row group) и расположены физически непрерывно (contiguous) в файле.

*Page* (страница): Группы значений столбцов (Column chunks) разделены на страницы. Страница является концептуально неделимой единицей (с точки зрения сжатия и кодирования). Один Column chunk может содержать несколько страниц, у каждой из которых может быть указан свой тип сжатия и кодирования.

Иерархически файл Parquet состоит из одной или нескольких групп строк (Row group). Группа строк содержит ровно один блок значений для каждого столбца (Column chunk). Блок значений столбца содержит одну или несколько страниц (Page).

## Единицы параллелизма

Обработку файлов в формате Apache Parquet можно выполнять параллельно:

- Для обработки в парадигме MapReduce за раз можно обрабатывать либо целиком, либо одну группу строк (Row Group)
- Для IO операций за раз можно обрабатывать блок значений столбца (Column chunk)
- При кодировании или сжатии можно обрабатывать за раз страницу (Page)